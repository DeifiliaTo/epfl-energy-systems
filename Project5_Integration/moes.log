SNOPT 7.5-1.2 : major_iterations=10000
ignoring integrality of 75 variables
SNOPT 7.5-1.2 : Nonlinear infeasibilities minimized.
2087 iterations, objective 15714438.81
Nonlin evals: constrs = 227, Jac = 226.
Edemand [*] :=
1  12237.1
2  12237.1
3  12237.1
4  12237.1
5   2646.4
;

Qheating [*,*]
:         1           2           3            4           6        :=
AA     2851.88    2780.58     1207.35      969.169      4509.7
AI     3190.73    3131.68        0         523.128      6211.33
BC     1539.72    1512.53        0         273.703      2923.34
BI      272.84     267.091       0          31.3329      557.679
BM     2177.61    2134.01        0         408.809      4121.38
BP      746.685    733.003       0         147.305      1382.93
BS     1627.08    1601.22      156.512     505.349      2610.27
CE     3060.17    2985.82     1250.99     1049.72       4813.94
CH     2907.18    2853.8         0         258.291      6117.18
CM      975.389    955.272       0         125.033      1956.61
CO      531.966    521.782       0          25.6128     1154.86
CRPP    721.778    708.05        0           0          1681.39
DIA     125.378    123.587      11.9562     41.8779      193.488
EL     1173.45    1157.52        0         121.965      2379.52
GC     2051.53    2014.48        0         391.211      3832.08
GR      411.598    398.643      56.0567     41.0322      868.129
IN     1562.2     1530.73        0         251.163      3029.32
MA     1467.12    1427.46        0           0          4110.62
ME      512.056    491.531       0           0          1818.67
MX     1671.82    1651.78        0          36.5923     3697.55
ODY     515.963    506.154     127.119     175.297       799.736
PH     1761.33    1740.58        0           0          4431.79
PO       44.29      43.3786      0           0.499354    100.782
TCV     110.546    102.196       0           0           869.385
;

Qheatingdemand :=
LowT    1   19103.2
LowT    2   18729.7
LowT    3    1502.94
LowT    4    3480.47
LowT    6   37483.7
MediumT 1   12907.1
MediumT 2   12643.1
MediumT 3    1307.05
MediumT 4    1896.62
MediumT 6   26688
;

Qheatingsupply [*] :=
    Boiler    500
     Cogen   2800.11
Geothermal  10000
HP1stageLT   1000
HP1stageMT   1000
  HP2stage   1000
      SOFC     30
;

mult [*] :=
      Boiler   10
       Cogen   17.5595
 ElecGridBuy   12.8318
ElecGridSell   32.8728
  Geothermal   -4.3179e-34
  HP1stageLT    9.99186
    HP2stage    0.0111995
  NatGasGrid  102.116
          PV   16.7195
        SOFC   -1.15593e-19
;

mult_t [*,*]
:                   1             2             3              4         :=
Boiler         10             10            0              0
Cogen           6.07733        5.84613      0.000929109    0.00112908
ElecGridBuy     1.87378        2.32482     11.0958        12.828
ElecGridSell   -1.48679e-18    0            0              0
HP1stageLT      9.99186        9.99186      2.80739        5.37393
HP2stage        0.00126035     0.0111995    0              0
NatGasGrid     38.975         37.7037       0.00510921     0.00620886
PV              2.7728         2.35894     16.7195         3.64188

:                   5              6         :=
Boiler          5.85979e-31    10
Cogen           0              17.5595
ElecGridBuy     2.24497         0
ElecGridSell    5.19827e-18    32.8728
Geothermal      9.00254e-34     0
HP1stageLT     -6.27352e-27     9.99186
HP1stageMT     -5.28448e-29     0
HP2stage       -6.94049e-27     0.0111995
NatGasGrid      0             102.116
PV              4.01435         0
;

Flowin :=
Biogas      SOFC            109.729
Electricity ElecGridSell   1000
Electricity HP2stage        490.323
Natgas      Boiler          555.556
Natgas      Cogen          5499.04
;

Flowout :=
Electricity Cogen         2000
Electricity ElecGridBuy   1000
Electricity Geothermal    4800
Electricity PV             100
Electricity SOFC            58
Natgas      NatGasGrid    1000
;

FlowInUnit [Biogas,*,*]
 [Electricity,*,*]
:                   1            2              3               4          :=
HP1stageLT     2067.99       2010.39      532.487         957.334
HP1stageMT        0             0           2.92646e-26    -1.72203e-25
HP2stage          0.617979      5.49138    -4.42343e-25    -4.4038e-25

:                   5             6         :=
ElecGridSell   0             32872.8
HP1stageLT     0              2240.79
HP1stageMT     1.75829e-27       0
HP2stage       1.71259e-12       5.49138

 [Natgas,*,*]
:                 1          2          3         4           5           6  :=
Boiler          5555.56    5555.56   0         0         8.39522e-28    5555.56
Cogen          33419.5    32148.1    5.10921   6.20886   0             96560.6
;

FlowOutUnit [Biogas,*,*]
 [Electricity,*,*]
:                  1           2            3             4         :=
Cogen          12154.7     11692.3         1.85822       2.25816
ElecGridBuy     1873.78     2324.82    11095.8       12828
PV               277.279     235.895    1671.95        364.188

:                    5             6       :=
Cogen             0             35119.1
ElecGridBuy    2244.97              0
Geothermal       -1.17216e-27       0
PV              401.435             0

 [Natgas,*,*]
:                1        2         3         4        6       :=
NatGasGrid     38975   37703.7   5.10921   6.20886   102116
;

set Buildings :=
GC     GR     CH     CO     TCV    ME     PO     BM
CE     CM     PH     BP     IN     AA     CRPP   DIA
MA     BI     BC     BS     ODY    EL     MX     AI;

InvCost = 1375990

OpCost = 13668900

use [*] :=
      Boiler   1
       Cogen   0.0780424
 ElecGridBuy   0.0128318
ElecGridSell   0.0328728
  HP1stageLT   0.999186
    HP2stage   0.000223991
  NatGasGrid   0.102116
          PV   0.0167195
        SOFC  -4.89891e-32
;

Tlmc_HP1stageMT [*] :=
1  279.497
2  280.497
3  282.497
4  284.497
5  285.497
6  276.497
;

CO2 = 15714400

heat_recovery :=
DC      1     7.6238
DC      2     7.62375
DC      3     7.60068
DC      4     0.541893
DC      5     0.196558
DC      6     7.62515
Vent    1     0.131543
Vent    2     0.131543
Vent    3     0.131543
Vent    4     0.512
Vent    5     0.131543
Vent    6     0.131543
Vent_HP 1     0.131543
Vent_HP 2     0.131543
Vent_HP 3     0.131543
Vent_HP 4     0.131543
Vent_HP 5   457.542
Vent_HP 6    47.3024
;

use_recovery [*] :=
;

mult_t [*,*]
:                   1             2             3              4         :=
Boiler         10             10            0              0
Cogen           6.07733        5.84613      0.000929109    0.00112908
ElecGridBuy     1.87378        2.32482     11.0958        12.828
ElecGridSell   -1.48679e-18    0            0              0
HP1stageLT      9.99186        9.99186      2.80739        5.37393
HP2stage        0.00126035     0.0111995    0              0
NatGasGrid     38.975         37.7037       0.00510921     0.00620886
PV              2.7728         2.35894     16.7195         3.64188

:                   5              6         :=
Boiler          5.85979e-31    10
Cogen           0              17.5595
ElecGridBuy     2.24497         0
ElecGridSell    5.19827e-18    32.8728
Geothermal      9.00254e-34     0
HP1stageLT     -6.27352e-27     9.99186
HP1stageMT     -5.28448e-29     0
HP2stage       -6.94049e-27     0.0111995
NatGasGrid      0             102.116
PV              4.01435         0
;

ampl: reset;
ampl: include moes.run
SNOPT 7.5-1.2 : major_iterations=10000
ignoring integrality of 75 variables
SNOPT 7.5-1.2 : Nonlinear infeasibilities minimized.
2899 iterations, objective 0
Nonlin evals: constrs = 480, Jac = 479.
Edemand [*] :=
1  12237.1
2  12237.1
3  12237.1
4  12237.1
5   2646.4
;

Qheating [*,*]
:         1           2           3            4           6        :=
AA     2851.88    2780.58     1207.35      969.169      4509.7
AI     3190.73    3131.68        0         523.128      6211.33
BC     1539.72    1512.53        0         273.703      2923.34
BI      272.84     267.091       0          31.3329      557.679
BM     2177.61    2134.01        0         408.809      4121.38
BP      746.685    733.003       0         147.305      1382.93
BS     1627.08    1601.22      156.512     505.349      2610.27
CE     3060.17    2985.82     1250.99     1049.72       4813.94
CH     2907.18    2853.8         0         258.291      6117.18
CM      975.389    955.272       0         125.033      1956.61
CO      531.966    521.782       0          25.6128     1154.86
CRPP    721.778    708.05        0           0          1681.39
DIA     125.378    123.587      11.9562     41.8779      193.488
EL     1173.45    1157.52        0         121.965      2379.52
GC     2051.53    2014.48        0         391.211      3832.08
GR      411.598    398.643      56.0567     41.0322      868.129
IN     1562.2     1530.73        0         251.163      3029.32
MA     1467.12    1427.46        0           0          4110.62
ME      512.056    491.531       0           0          1818.67
MX     1671.82    1651.78        0          36.5923     3697.55
ODY     515.963    506.154     127.119     175.297       799.736
PH     1761.33    1740.58        0           0          4431.79
PO       44.29      43.3786      0           0.499354    100.782
TCV     110.546    102.196       0           0           869.385
;

Qheatingdemand :=
LowT    1   19103.2
LowT    2   18729.7
LowT    3    1502.94
LowT    4    3480.47
LowT    6   37483.7
MediumT 1   12907.1
MediumT 2   12643.1
MediumT 3    1307.05
MediumT 4    1896.62
MediumT 6   26688
;

Qheatingsupply [*] :=
    Boiler    500
     Cogen   2800.11
Geothermal  10000
HP1stageLT   1000
HP1stageMT   1000
  HP2stage   1000
      SOFC     30
;

mult [*] :=
      Boiler  10
       Cogen  12.6866
 ElecGridBuy  14.4997
ElecGridSell  16.05
  Geothermal   0.001
  HP1stageLT  10
  HP1stageMT  10
    HP2stage   8.63767
  NatGasGrid  69.7644
          PV  16.7195
;

mult_t [*,*]
:                  1            2            3          4          5       :=
Cogen           7.53824     8.11582        0          0         0
ElecGridBuy     0           8.95765e-06   11.9332    14.4997    2.24497
Geothermal      0.001       0.001          0.001      0.001     0
HP1stageMT     10           0              0          0         0
HP2stage        0.892401    8.63767        2.79999    5.36709   0
NatGasGrid     41.4531     44.6292         0          0         0
PV              2.7728      2.35895       16.7195     3.64188   4.01435

:                 6        :=
Cogen          12.6866
ElecGridSell   16.05
Geothermal      0.001
HP1stageLT     10
HP1stageMT     10
HP2stage        8.63767
NatGasGrid     69.7644
;

Flowin :=
Biogas      SOFC            109.729
Electricity ElecGridSell   1000
Electricity HP2stage        490.323
Natgas      Boiler          555.556
Natgas      Cogen          5499.04
;

Flowout :=
Electricity Cogen         2000
Electricity ElecGridBuy   1000
Electricity Geothermal    4800
Electricity PV             100
Electricity SOFC            58
Natgas      NatGasGrid    1000
;

FlowInUnit :=
Electricity ElecGridSell 6   16050
Electricity HP1stageLT   6    2242.62
Electricity HP1stageMT   1    2683.89
Electricity HP1stageMT   6    2850.24
Electricity HP2stage     1     437.564
Electricity HP2stage     2    4235.25
Electricity HP2stage     3    1372.9
Electricity HP2stage     4    2631.61
Electricity HP2stage     6    4235.25
Natgas      Cogen        1   41453.1
Natgas      Cogen        2   44629.2
Natgas      Cogen        6   69764.4
;

FlowOutUnit :=
Electricity Cogen       1   15076.5
Electricity Cogen       2   16231.6
Electricity Cogen       6   25373.3
Electricity ElecGridBuy 2       0.00895765
Electricity ElecGridBuy 3   11933.2
Electricity ElecGridBuy 4   14499.7
Electricity ElecGridBuy 5    2244.97
Electricity Geothermal  1       4.8
Electricity Geothermal  2       4.8
Electricity Geothermal  3       4.8
Electricity Geothermal  4       4.8
Electricity Geothermal  6       4.8
Electricity PV          1     277.28
Electricity PV          2     235.895
Electricity PV          3    1671.95
Electricity PV          4     364.188
Electricity PV          5     401.435
Natgas      NatGasGrid  1   41453.1
Natgas      NatGasGrid  2   44629.2
Natgas      NatGasGrid  6   69764.4
;

set Buildings :=
GC     GR     CH     CO     TCV    ME     PO     BM
CE     CM     PH     BP     IN     AA     CRPP   DIA
MA     BI     BC     BS     ODY    EL     MX     AI;

InvCost = 3254330

OpCost = 12886100

use [*] :=
      Boiler  1
       Cogen  0.0563851
 ElecGridBuy  0.0144997
ElecGridSell  0.01605
  Geothermal  0.001
  HP1stageLT  1
  HP1stageMT  1
    HP2stage  0.172753
  NatGasGrid  0.0697644
          PV  0.0167195
;

Tlmc_HP1stageMT [*] :=
1  279.497
2  280.497
3  282.497
4  284.497
5  285.497
6  276.497
;

CO2 = 17187400

heat_recovery :=
DC      1      7.6238
DC      2      7.62375
DC      3      0.373443
DC      4      0.541893
DC      5    373.767
DC      6      7.62515
Vent    1      0.131543
Vent    2      0.536171
Vent    3      0.26335
Vent    4      0.222045
Vent    5      0.131543
Vent    6      0.131543
Vent_HP 1   1471.9
Vent_HP 2   1448.95
Vent_HP 3    814.138
Vent_HP 4    686.446
Vent_HP 5    457.542
Vent_HP 6   1957.77
;

use_recovery [*] :=
;

mult_t [*,*]
:                  1            2            3          4          5       :=
Cogen           7.53824     8.11582        0          0         0
ElecGridBuy     0           8.95765e-06   11.9332    14.4997    2.24497
Geothermal      0.001       0.001          0.001      0.001     0
HP1stageMT     10           0              0          0         0
HP2stage        0.892401    8.63767        2.79999    5.36709   0
NatGasGrid     41.4531     44.6292         0          0         0
PV              2.7728      2.35895       16.7195     3.64188   4.01435

:                 6        :=
Cogen          12.6866
ElecGridSell   16.05
Geothermal      0.001
HP1stageLT     10
HP1stageMT     10
HP2stage        8.63767
NatGasGrid     69.7644
;

ampl: reset;
ampl: include moes.run
SNOPT 7.5-1.2 : major_iterations=10000
ignoring integrality of 75 variables
SNOPT 7.5-1.2 : Nonlinear infeasibilities minimized.
2899 iterations, objective 0
Nonlin evals: constrs = 480, Jac = 479.
Edemand [*] :=
1  12237.1
2  12237.1
3  12237.1
4  12237.1
5   2646.4
;

Qheating [*,*]
:         1           2           3            4           6        :=
AA     2851.88    2780.58     1207.35      969.169      4509.7
AI     3190.73    3131.68        0         523.128      6211.33
BC     1539.72    1512.53        0         273.703      2923.34
BI      272.84     267.091       0          31.3329      557.679
BM     2177.61    2134.01        0         408.809      4121.38
BP      746.685    733.003       0         147.305      1382.93
BS     1627.08    1601.22      156.512     505.349      2610.27
CE     3060.17    2985.82     1250.99     1049.72       4813.94
CH     2907.18    2853.8         0         258.291      6117.18
CM      975.389    955.272       0         125.033      1956.61
CO      531.966    521.782       0          25.6128     1154.86
CRPP    721.778    708.05        0           0          1681.39
DIA     125.378    123.587      11.9562     41.8779      193.488
EL     1173.45    1157.52        0         121.965      2379.52
GC     2051.53    2014.48        0         391.211      3832.08
GR      411.598    398.643      56.0567     41.0322      868.129
IN     1562.2     1530.73        0         251.163      3029.32
MA     1467.12    1427.46        0           0          4110.62
ME      512.056    491.531       0           0          1818.67
MX     1671.82    1651.78        0          36.5923     3697.55
ODY     515.963    506.154     127.119     175.297       799.736
PH     1761.33    1740.58        0           0          4431.79
PO       44.29      43.3786      0           0.499354    100.782
TCV     110.546    102.196       0           0           869.385
;

Qheatingdemand :=
LowT    1   19103.2
LowT    2   18729.7
LowT    3    1502.94
LowT    4    3480.47
LowT    6   37483.7
MediumT 1   12907.1
MediumT 2   12643.1
MediumT 3    1307.05
MediumT 4    1896.62
MediumT 6   26688
;

Qheatingsupply [*] :=
    Boiler    500
     Cogen   2800.11
Geothermal  10000
HP1stageLT   1000
HP1stageMT   1000
  HP2stage   1000
      SOFC     30
;

mult [*] :=
      Boiler  10
       Cogen  12.6866
 ElecGridBuy  14.4997
ElecGridSell  16.05
  Geothermal   0.001
  HP1stageLT  10
  HP1stageMT  10
    HP2stage   8.63767
  NatGasGrid  69.7644
          PV  16.7195
;

mult_t [*,*]
:                  1            2            3          4          5       :=
Cogen           7.53824     8.11582        0          0         0
ElecGridBuy     0           8.95765e-06   11.9332    14.4997    2.24497
Geothermal      0.001       0.001          0.001      0.001     0
HP1stageMT     10           0              0          0         0
HP2stage        0.892401    8.63767        2.79999    5.36709   0
NatGasGrid     41.4531     44.6292         0          0         0
PV              2.7728      2.35895       16.7195     3.64188   4.01435

:                 6        :=
Cogen          12.6866
ElecGridSell   16.05
Geothermal      0.001
HP1stageLT     10
HP1stageMT     10
HP2stage        8.63767
NatGasGrid     69.7644
;

Flowin :=
Biogas      SOFC            109.729
Electricity ElecGridSell   1000
Electricity HP2stage        490.323
Natgas      Boiler          555.556
Natgas      Cogen          5499.04
;

Flowout :=
Electricity Cogen         2000
Electricity ElecGridBuy   1000
Electricity Geothermal    4800
Electricity PV             100
Electricity SOFC            58
Natgas      NatGasGrid    1000
;

FlowInUnit :=
Electricity ElecGridSell 6   16050
Electricity HP1stageLT   6    2242.62
Electricity HP1stageMT   1    2683.89
Electricity HP1stageMT   6    2850.24
Electricity HP2stage     1     437.564
Electricity HP2stage     2    4235.25
Electricity HP2stage     3    1372.9
Electricity HP2stage     4    2631.61
Electricity HP2stage     6    4235.25
Natgas      Cogen        1   41453.1
Natgas      Cogen        2   44629.2
Natgas      Cogen        6   69764.